{"version":3,"sources":["simulation.js","ui.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["SirSimulation","running","rate","cs","range","color","idToI","vacc","beta","gamma","interval","callback","current_inf","total_inf","day","init","counties","max_pop","d3","scale","pow","exponent","domain","init_cs","start","cid","n","c","get","inf","sus","rec","setInterval","update","that","i","length","da","db","step","flush","max","Math","pop","total_infected","total","self","map","set","id","reset","clearInterval","County","simulation","coms","d","rgb","r","b","g","toString","select","style","com","ci","work_id","dx","width","height","active_state","active_counties","projection","geo","albersUsa","translate","path","svg","append","attr","popById","commutes","active_commutes","queue","defer","json","tsv","population","await","ready","error","us","commuter_data","onchage","selectAll","data","topojson","feature","objects","features","enter","on","parentNode","appendChild","classed","county_clicked","states","state_clicked","node","state_id","floor","undefined","filter","home_id","each","push","r_nought","document","getElementById","value","D","onchange","bounds","dy","x","y","transition","duration","c_inf","t_inf","innerHTML","toLocaleString","round","frameElement","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","window","reload","close","onclose","log","removeErrorOverlay","message","stack","overlay","createErrorOverlay","body","remove","createElement","stackTrace","innerText","getParents","modules","parents","k","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"ui.69528adb.js","sourceRoot":"../src","sourcesContent":["export function SirSimulation() {\n  this.running = false;\n  this.rate = 10;\n\n  this.cs;\n  this.range;\n  this.color;\n  this.idToI;\n\n  this.vacc;\n  this.beta;\n  this.gamma;\n\n  this.interval;\n\n  this.callback;\n  this.current_inf;\n  this.total_inf;\n  this.day = 1;\n\n  this.init = function(counties, beta, gamma, vacc, callback) {\n    this.cs = counties;\n    this.beta = beta / this.rate;\n    this.gamma = gamma / this.rate;\n    this.vacc = vacc;\n    this.callback = callback;\n    this.range = [0, this.max_pop()];\n    this.color = d3.scale\n      .pow()\n      .exponent(0.33)\n      .domain(this.range)\n      .range([\"#ffffff\", \"#08306b\"]);\n    this.init_cs();\n  };\n\n  this.start = function(cid, n) {\n    this.running = true;\n    const c = this.cs[this.idToI.get(cid)];\n    c.inf += n;\n    if (c.sus >= n) {\n      c.sus -= n;\n    } else {\n      c.rec -= n;\n    }\n    this.current_inf = n;\n    this.total_inf = n;\n    this.day = 0;\n    this.interval = setInterval(this.update, 1000 / this.rate, this);\n    this.update(this);\n  };\n\n  this.update = that => {\n    that.callback(that.current_inf, that.total_inf, that.day / that.rate);\n    let c;\n    for (var i = 0; i < that.cs.length; i++) {\n      c = that.cs[i];\n      c.da = 0;\n      c.db = 0;\n    }\n    for (var i = 0; i < that.cs.length; i++) {\n      c = that.cs[i];\n      if (c.inf > 0) {\n        c.step();\n      }\n    }\n    for (var i = 0; i < that.cs.length; i++) {\n      that.cs[i].flush();\n    }\n\n    that.day = that.day + 1;\n  };\n\n  this.max_pop = function() {\n    let max = 0;\n    for (let i = 0; i < this.cs.length; i++) {\n      max = Math.max(this.cs[i].pop, max);\n    }\n    return max;\n  };\n\n  this.total_infected = function() {\n    let total = 0;\n    for (let i = 0; i < this.cs.length; i++) {\n      total += this.cs[i].inf;\n    }\n    return total;\n  };\n\n  const self = this;\n\n  this.init_cs = function() {\n    this.idToI = d3.map();\n    let c;\n    for (let i = 0; i < this.cs.length; i++) {\n      c = this.cs[i];\n      this.idToI.set(c.id, i);\n      c.rec = c.pop * self.vacc;\n      c.sus = c.pop - c.rec;\n      c.inf = 0;\n      c.init();\n    }\n  };\n\n  this.reset = function() {\n    clearInterval(this.interval);\n    this.callback(0, 0, 0);\n    this.running = false;\n  };\n}\n\nexport function County(simulation, i, id, pop, coms) {\n  this.i = i;\n  this.id = id;\n  this.pop = pop;\n  this.coms = coms;\n\n  this.color;\n\n  this.sus;\n  this.inf;\n  this.rec;\n\n  this.da;\n  this.db;\n\n  this.init = function() {\n    const c = simulation.color(this.pop);\n    const d = d3.rgb(c);\n    d.r = d.b;\n    d.g = d.b;\n    d.b = 0;\n    this.color = d3.scale\n      .pow()\n      .exponent(0.2)\n      .domain([0, 1])\n      .range([c, d.toString()]);\n    d3.select(`#s${this.id}`).style(\"fill\", c);\n  };\n\n  this.step = function() {\n    for (let i = 0; i < this.coms.length; i++) {\n      const com = this.coms[i];\n      const ci = simulation.idToI.get(+com.work_id);\n      const c = simulation.cs[ci];\n      const n = +com.total;\n      const dx = simulation.beta * this.inf * (n / this.pop) * (c.sus / c.pop);\n      c.da += dx;\n    }\n    this.da += simulation.beta * this.inf * (this.sus / this.pop);\n    this.db += simulation.gamma * this.inf;\n  };\n\n  this.flush = function() {\n    this.sus += -this.da;\n    this.inf += this.da - this.db;\n    this.rec += this.db;\n\n    simulation.total_inf += this.da;\n    simulation.current_inf += this.da - this.db;\n\n    d3.select(`#s${this.id}`).style(\"fill\", this.color(this.inf / this.pop));\n  };\n}\n","import { County, SirSimulation } from './simulation.js';\n\n      const simulation = new SirSimulation();\n\n      var width = 960,\n          height = 600;\n\n      /* d3 selectors with active elements when a state is selected */\n      var active_state = d3.select(null),\n          active_counties = d3.select(null);\n\n      /* standard US projection */\n      var projection = d3.geo.albersUsa()\n          .scale(1280)\n          .translate([width / 2, height / 2]);\n\n      /* path used to draw all geometric elements */\n      var path = d3.geo.path()\n          .projection(projection);\n\n      /* create a new svg element */\n      var svg = d3.select(\"#vis\").append(\"svg\")\n          .attr(\"width\", width)\n          .attr(\"height\", height);\n\n      /* chrome cannot handle svg transforms, so svg is really a nested g tag */\n      svg = svg.append(\"g\");\n\n      /* map for converting county id (fips) to population */\n      var popById = d3.map();\n\n      /* array of commutes */\n      var commutes = [],\n          active_commutes = [];\n\n      /* wait for files to load and update popById */\n      queue()\n          .defer(d3.json, \"data/us.json\")\n          .defer(d3.tsv, \"data/commuter.tsv\")\n          .defer(d3.tsv, \"data/population.tsv\", function (d) { popById.set(d.id, +d.population); })\n          .await(ready);\n\n      function ready(error, us, commuter_data, onchage) {\n        if (error) throw error;\n\n        commutes = commuter_data;\n\n        /* draw all counties */\n        svg.append(\"g\")\n          .attr(\"class\", \"counties\")\n          .selectAll(\"path\")\n            .data(topojson.feature(us, us.objects.counties).features)\n          .enter().append(\"path\")\n            .attr(\"d\", path)\n            .attr(\"class\", \"county\")\n            .attr(\"id\", function (d) { return \"s\" + d.id; })\n            .on(\"mouseover\", function () {\n              this.parentNode.appendChild(this);\n              d3.select(this)\n                .classed(\"hovered\", true);\n            })\n            .on(\"mouseout\", function () {\n              d3.select(this)\n                .classed(\"hovered\", false);\n            })\n            .on(\"click\", county_clicked);\n\n        /* draw all states */\n        svg.append(\"g\")\n          .attr(\"class\", \"states\")\n          .selectAll(\"path\")\n            .data(topojson.feature(us, us.objects.states).features)\n          .enter().append(\"path\")\n            .attr(\"d\", path)\n            .attr(\"class\", \"state\")\n            .on(\"click\", state_clicked);\n      }\n\n      function state_clicked(d) {\n        if (active_state.node() != null && active_state.node() != this) return reset();\n\n        /* remove old active states and counties */\n        active_state.classed(\"active\", false);\n        active_counties.classed(\"active\", false);\n\n        /* make the clicked state active */\n        active_state = d3.select(this).classed(\"active\", true);\n\n        /* make the state's counties active */\n        var state_id = d.id;\n        active_counties = svg.select(\"g.counties\")\n                            .selectAll(\"path.county\")\n                              .classed(\"active\", function (d) { return Math.floor(d.id/1000) == state_id && popById.get(d.id) !== undefined; });\n        active_counties = active_counties.filter(\".active\");\n\n        /* get all relevant commutes */\n        active_commutes = commutes.filter(function (d) {\n          var id = +d.home_id;\n          return Math.floor(id / 1000) == state_id && popById.get(id) !== undefined;\n        });\n\n        /* initialize the simulation */\n        var counties = [];\n        active_counties.each(function (d, i) {\n          counties.push(new County(simulation, i, d.id, popById.get(d.id), active_commutes.filter(function (c) { return +c.home_id == d.id; })));\n        });\n        var r_nought = document.getElementById(\"reproduction\").value;\n        var D = document.getElementById(\"duration\").value;\n        var vacc = document.getElementById(\"vacc\").value / 100;\n        simulation.init(counties, r_nought*(1/D), 1/D, vacc, onchange);\n\n        /* get bounds of state */\n        var bounds = path.bounds(d),\n            dx = bounds[1][0] - bounds[0][0],\n            dy = bounds[1][1] - bounds[0][1],\n            x = (bounds[0][0] + bounds[1][0]) / 2,\n            y = (bounds[0][1] + bounds[1][1]) / 2,\n            scale = .9 / Math.max(dx / width, dy / height),\n            translate = [width / 2 - scale * x, height / 2 - scale * y];\n\n        /* transition svg to fit bounds of state */\n        svg.transition()\n            .duration(750)\n            .style(\"stroke-width\", 1.5 / scale + \"px\")\n            .attr(\"transform\", \"translate(\" + translate + \")scale(\" + scale + \")\");\n      }\n\n      function county_clicked(d) {\n        if (!simulation.running) {\n          var n = Math.floor(document.getElementById(\"infected\").value);\n          simulation.start(d.id, n);\n        }\n      }\n\n      function reset() {\n        simulation.reset();\n\n        active_state.classed(\"active\", false);\n        active_state = d3.select(null);\n\n        active_counties.classed(\"active\", false);\n        active_counties = d3.select(null);\n\n        svg.transition()\n            .duration(750)\n            .style(\"stroke-width\", \"1.5px\")\n            .attr(\"transform\", \"\");\n      }\n\n      function onchange(c_inf, t_inf, day) {\n        document.getElementById(\"sim_day\").innerHTML = Math.floor(day).toLocaleString();\n        document.getElementById(\"c_inf\").innerHTML = Math.round(c_inf).toLocaleString();\n        document.getElementById(\"t_inf\").innerHTML = Math.round(t_inf).toLocaleString();\n      }\n\n      d3.select(self.frameElement).style(\"height\", height + \"px\");","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}