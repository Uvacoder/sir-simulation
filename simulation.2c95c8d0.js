parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"4dRf":[function(require,module,exports) {
function t(){this.running=!1,this.rate=10,this.cs,this.range,this.color,this.idToI,this.vacc,this.beta,this.gamma,this.interval,this.callback,this.current_inf,this.total_inf,this.day=1,this.init=function(t,i,s,h,n){this.cs=t,this.beta=i/this.rate,this.gamma=s/this.rate,this.vacc=h,this.callback=n,this.range=[0,this.max_pop()],this.color=d3.scale.pow().exponent(.33).domain(this.range).range(["#ffffff","#08306b"]),this.init_cs()},this.start=function(t,i){this.running=!0;var s=this.cs[this.idToI.get(t)];s.inf+=i,s.sus>=i?s.sus-=i:s.rec-=i,this.current_inf=i,this.total_inf=i,this.day=0,this.interval=setInterval(this.update,1e3/this.rate,this),this.update(this)},this.update=function(t){var i;t.callback(t.current_inf,t.total_inf,t.day/t.rate);for(var s=0;s<t.cs.length;s++)(i=t.cs[s]).da=0,i.db=0;for(s=0;s<t.cs.length;s++)(i=t.cs[s]).inf>0&&i.step();for(s=0;s<t.cs.length;s++)t.cs[s].flush();t.day=t.day+1},this.max_pop=function(){for(var t=0,i=0;i<this.cs.length;i++)t=Math.max(this.cs[i].pop,t);return t},this.total_infected=function(){for(var t=0,i=0;i<this.cs.length;i++)t+=this.cs[i].inf;return t},this.init_cs=function(){var t;this.idToI=d3.map();for(var i=0;i<this.cs.length;i++)t=this.cs[i],this.idToI.set(t.id,i),t.rec=t.pop*s.vacc,t.sus=t.pop-t.rec,t.inf=0,t.init()},this.reset=function(){clearInterval(this.interval),this.callback(0,0,0),this.running=!1}}function i(t,i,h,n){this.i=t,this.id=i,this.pop=h,this.coms=n,this.color,this.sus,this.inf,this.rec,this.da,this.db,this.init=function(){var t=s.color(this.pop),i=d3.rgb(t);i.r=i.b,i.g=i.b,i.b=0,this.color=d3.scale.pow().exponent(.2).domain([0,1]).range([t,i.toString()]),d3.select("#s".concat(this.id)).style("fill",t)},this.step=function(){for(var t=0;t<this.coms.length;t++){var i=this.coms[t],h=s.idToI.get(+i.work_id),n=s.cs[h],a=+i.total,c=s.beta*this.inf*(a/this.pop)*(n.sus/n.pop);n.da+=c}this.da+=s.beta*this.inf*(this.sus/this.pop),this.db+=s.gamma*this.inf},this.flush=function(){this.sus+=-this.da,this.inf+=this.da-this.db,this.rec+=this.db,s.total_inf+=this.da,s.current_inf+=this.da-this.db,d3.select("#s".concat(this.id)).style("fill",this.color(this.inf/this.pop))}}var s=new t;
},{}]},{},["4dRf"], null)
//# sourceMappingURL=/simulation.2c95c8d0.js.map